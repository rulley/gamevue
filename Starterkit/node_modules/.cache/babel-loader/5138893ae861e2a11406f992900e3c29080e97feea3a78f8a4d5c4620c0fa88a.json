{"ast":null,"code":"import { getFirebaseBackend } from '../../authUtils.js';\nexport const state = {\n  currentUser: sessionStorage.getItem('authUser')\n};\nexport const mutations = {\n  SET_CURRENT_USER(state, newValue) {\n    state.currentUser = newValue;\n    saveState('auth.currentUser', newValue);\n  }\n};\nexport const getters = {\n  // Whether the user is currently logged in.\n  loggedIn(state) {\n    return !!state.currentUser;\n  }\n};\nexport const actions = {\n  // This is automatically run in `src/state/store.js` when the app\n  // starts, along with any other actions named `init` in other modules.\n  // eslint-disable-next-line no-unused-vars\n  init({\n    state,\n    dispatch\n  }) {\n    dispatch('validate');\n  },\n  // Logs in the current user.\n  logIn({\n    commit,\n    dispatch,\n    getters\n  }, {\n    email,\n    password\n  } = {}) {\n    if (getters.loggedIn) return dispatch('validate');\n    return getFirebaseBackend().loginUser(email, password).then(response => {\n      const user = response;\n      commit('SET_CURRENT_USER', user);\n      return user;\n    });\n  },\n  // Logs out the current user.\n  logOut({\n    commit\n  }) {\n    // eslint-disable-next-line no-unused-vars\n    commit('SET_CURRENT_USER', null);\n    return new Promise((resolve, reject) => {\n      // eslint-disable-next-line no-unused-vars\n      getFirebaseBackend().logout().then(response => {\n        resolve(true);\n      }).catch(error => {\n        reject(this._handleError(error));\n      });\n    });\n  },\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  register({\n    commit,\n    dispatch,\n    getters\n  }, {\n    fullname,\n    email,\n    password\n  } = {}) {\n    if (getters.loggedIn) return dispatch('validate');\n    return getFirebaseBackend().registerUser(email, password).then(response => {\n      const user = response;\n      commit('SET_CURRENT_USER', user);\n      return user;\n    });\n  },\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  resetPassword({\n    commit,\n    dispatch,\n    getters\n  }, {\n    email\n  } = {}) {\n    if (getters.loggedIn) return dispatch('validate');\n    return getFirebaseBackend().forgetPassword(email).then(response => {\n      const message = response.data;\n      return message;\n    });\n  },\n  // Validates the current user's token and refreshes it\n  // with new data from the API.\n  // eslint-disable-next-line no-unused-vars\n  validate({\n    commit,\n    state\n  }) {\n    if (!state.currentUser) return Promise.resolve(null);\n    const user = getFirebaseBackend().getAuthenticatedUser();\n    commit('SET_CURRENT_USER', user);\n    return user;\n  }\n};\n\n// ===\n// Private helpers\n// ===\n\nfunction saveState(key, state) {\n  window.localStorage.setItem(key, JSON.stringify(state));\n}","map":{"version":3,"names":["getFirebaseBackend","state","currentUser","sessionStorage","getItem","mutations","SET_CURRENT_USER","newValue","saveState","getters","loggedIn","actions","init","dispatch","logIn","commit","email","password","loginUser","then","response","user","logOut","Promise","resolve","reject","logout","catch","error","_handleError","register","fullname","registerUser","resetPassword","forgetPassword","message","data","validate","getAuthenticatedUser","key","window","localStorage","setItem","JSON","stringify"],"sources":["/Users/michaelrellaford/Documents/gamevue/Starterkit/src/state/modules/auth.js"],"sourcesContent":["import { getFirebaseBackend } from '../../authUtils.js'\n\nexport const state = {\n  currentUser: sessionStorage.getItem('authUser'),\n}\n\nexport const mutations = {\n  SET_CURRENT_USER(state, newValue) {\n    state.currentUser = newValue\n    saveState('auth.currentUser', newValue)\n  },\n}\n\nexport const getters = {\n  // Whether the user is currently logged in.\n  loggedIn(state) {\n    return !!state.currentUser\n  },\n}\n\nexport const actions = {\n  // This is automatically run in `src/state/store.js` when the app\n  // starts, along with any other actions named `init` in other modules.\n  // eslint-disable-next-line no-unused-vars\n  init({ state, dispatch }) {\n    dispatch('validate')\n  },\n\n  // Logs in the current user.\n  logIn({ commit, dispatch, getters }, { email, password } = {}) {\n    if (getters.loggedIn) return dispatch('validate')\n\n    return getFirebaseBackend().loginUser(email, password).then((response) => {\n      const user = response\n      commit('SET_CURRENT_USER', user)\n      return user\n    });\n  },\n\n  // Logs out the current user.\n  logOut({ commit }) {\n    // eslint-disable-next-line no-unused-vars\n    commit('SET_CURRENT_USER', null)\n    return new Promise((resolve, reject) => {\n      // eslint-disable-next-line no-unused-vars\n      getFirebaseBackend().logout().then((response) => {\n        resolve(true);\n      }).catch((error) => {\n        reject(this._handleError(error));\n      })\n    });\n  },\n\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  register({ commit, dispatch, getters }, { fullname, email, password } = {}) {\n    if (getters.loggedIn) return dispatch('validate')\n\n    return getFirebaseBackend().registerUser(email, password).then((response) => {\n      const user = response\n      commit('SET_CURRENT_USER', user)\n      return user\n    });\n  },\n\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  resetPassword({ commit, dispatch, getters }, { email } = {}) {\n    if (getters.loggedIn) return dispatch('validate')\n\n    return getFirebaseBackend().forgetPassword(email).then((response) => {\n      const message = response.data\n      return message\n    });\n  },\n\n  // Validates the current user's token and refreshes it\n  // with new data from the API.\n  // eslint-disable-next-line no-unused-vars\n  validate({ commit, state }) {\n    if (!state.currentUser) return Promise.resolve(null)\n    const user = getFirebaseBackend().getAuthenticatedUser();\n    commit('SET_CURRENT_USER', user)\n    return user;\n  },\n}\n\n// ===\n// Private helpers\n// ===\n\nfunction saveState(key, state) {\n  window.localStorage.setItem(key, JSON.stringify(state))\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
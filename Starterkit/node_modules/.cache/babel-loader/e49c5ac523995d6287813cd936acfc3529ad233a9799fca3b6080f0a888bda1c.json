{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport { getFirebaseBackend } from '../../authUtils.js';\nexport var state = {\n  currentUser: sessionStorage.getItem('authUser')\n};\nexport var mutations = {\n  SET_CURRENT_USER: function SET_CURRENT_USER(state, newValue) {\n    state.currentUser = newValue;\n    saveState('auth.currentUser', newValue);\n  }\n};\nexport var getters = {\n  // Whether the user is currently logged in.\n  loggedIn: function loggedIn(state) {\n    return !!state.currentUser;\n  }\n};\nexport var actions = {\n  // This is automatically run in `src/state/store.js` when the app\n  // starts, along with any other actions named `init` in other modules.\n  // eslint-disable-next-line no-unused-vars\n  init: function init(_ref) {\n    var state = _ref.state,\n      dispatch = _ref.dispatch;\n    dispatch('validate');\n  },\n  // Logs in the current user.\n  logIn: function logIn(_ref2) {\n    var commit = _ref2.commit,\n      dispatch = _ref2.dispatch,\n      getters = _ref2.getters;\n    var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      email = _ref3.email,\n      password = _ref3.password;\n    if (getters.loggedIn) return dispatch('validate');\n    return getFirebaseBackend().loginUser(email, password).then(function (response) {\n      var user = response;\n      commit('SET_CURRENT_USER', user);\n      return user;\n    });\n  },\n  // Logs out the current user.\n  logOut: function logOut(_ref4) {\n    var _this = this;\n    var commit = _ref4.commit;\n    // eslint-disable-next-line no-unused-vars\n    commit('SET_CURRENT_USER', null);\n    return new Promise(function (resolve, reject) {\n      // eslint-disable-next-line no-unused-vars\n      getFirebaseBackend().logout().then(function (response) {\n        resolve(true);\n      }).catch(function (error) {\n        reject(_this._handleError(error));\n      });\n    });\n  },\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  register: function register(_ref5) {\n    var commit = _ref5.commit,\n      dispatch = _ref5.dispatch,\n      getters = _ref5.getters;\n    var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      fullname = _ref6.fullname,\n      email = _ref6.email,\n      password = _ref6.password;\n    if (getters.loggedIn) return dispatch('validate');\n    return getFirebaseBackend().registerUser(email, password).then(function (response) {\n      var user = response;\n      commit('SET_CURRENT_USER', user);\n      return user;\n    });\n  },\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  resetPassword: function resetPassword(_ref7) {\n    var commit = _ref7.commit,\n      dispatch = _ref7.dispatch,\n      getters = _ref7.getters;\n    var _ref8 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      email = _ref8.email;\n    if (getters.loggedIn) return dispatch('validate');\n    return getFirebaseBackend().forgetPassword(email).then(function (response) {\n      var message = response.data;\n      return message;\n    });\n  },\n  // Validates the current user's token and refreshes it\n  // with new data from the API.\n  // eslint-disable-next-line no-unused-vars\n  validate: function validate(_ref9) {\n    var commit = _ref9.commit,\n      state = _ref9.state;\n    if (!state.currentUser) return Promise.resolve(null);\n    var user = getFirebaseBackend().getAuthenticatedUser();\n    commit('SET_CURRENT_USER', user);\n    return user;\n  }\n};\n\n// ===\n// Private helpers\n// ===\n\nfunction saveState(key, state) {\n  window.localStorage.setItem(key, JSON.stringify(state));\n}","map":{"version":3,"names":["getFirebaseBackend","state","currentUser","sessionStorage","getItem","mutations","SET_CURRENT_USER","newValue","saveState","getters","loggedIn","actions","init","_ref","dispatch","logIn","_ref2","commit","_ref3","arguments","length","undefined","email","password","loginUser","then","response","user","logOut","_ref4","_this","Promise","resolve","reject","logout","catch","error","_handleError","register","_ref5","_ref6","fullname","registerUser","resetPassword","_ref7","_ref8","forgetPassword","message","data","validate","_ref9","getAuthenticatedUser","key","window","localStorage","setItem","JSON","stringify"],"sources":["/Users/michaelrellaford/Documents/gamevue/Starterkit/src/state/modules/auth.js"],"sourcesContent":["import { getFirebaseBackend } from '../../authUtils.js'\n\nexport const state = {\n  currentUser: sessionStorage.getItem('authUser'),\n}\n\nexport const mutations = {\n  SET_CURRENT_USER(state, newValue) {\n    state.currentUser = newValue\n    saveState('auth.currentUser', newValue)\n  },\n}\n\nexport const getters = {\n  // Whether the user is currently logged in.\n  loggedIn(state) {\n    return !!state.currentUser\n  },\n}\n\nexport const actions = {\n  // This is automatically run in `src/state/store.js` when the app\n  // starts, along with any other actions named `init` in other modules.\n  // eslint-disable-next-line no-unused-vars\n  init({ state, dispatch }) {\n    dispatch('validate')\n  },\n\n  // Logs in the current user.\n  logIn({ commit, dispatch, getters }, { email, password } = {}) {\n    if (getters.loggedIn) return dispatch('validate')\n\n    return getFirebaseBackend().loginUser(email, password).then((response) => {\n      const user = response\n      commit('SET_CURRENT_USER', user)\n      return user\n    });\n  },\n\n  // Logs out the current user.\n  logOut({ commit }) {\n    // eslint-disable-next-line no-unused-vars\n    commit('SET_CURRENT_USER', null)\n    return new Promise((resolve, reject) => {\n      // eslint-disable-next-line no-unused-vars\n      getFirebaseBackend().logout().then((response) => {\n        resolve(true);\n      }).catch((error) => {\n        reject(this._handleError(error));\n      })\n    });\n  },\n\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  register({ commit, dispatch, getters }, { fullname, email, password } = {}) {\n    if (getters.loggedIn) return dispatch('validate')\n\n    return getFirebaseBackend().registerUser(email, password).then((response) => {\n      const user = response\n      commit('SET_CURRENT_USER', user)\n      return user\n    });\n  },\n\n  // register the user\n  // eslint-disable-next-line no-unused-vars\n  resetPassword({ commit, dispatch, getters }, { email } = {}) {\n    if (getters.loggedIn) return dispatch('validate')\n\n    return getFirebaseBackend().forgetPassword(email).then((response) => {\n      const message = response.data\n      return message\n    });\n  },\n\n  // Validates the current user's token and refreshes it\n  // with new data from the API.\n  // eslint-disable-next-line no-unused-vars\n  validate({ commit, state }) {\n    if (!state.currentUser) return Promise.resolve(null)\n    const user = getFirebaseBackend().getAuthenticatedUser();\n    commit('SET_CURRENT_USER', user)\n    return user;\n  },\n}\n\n// ===\n// Private helpers\n// ===\n\nfunction saveState(key, state) {\n  window.localStorage.setItem(key, JSON.stringify(state))\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}